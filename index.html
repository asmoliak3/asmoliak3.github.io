<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pushwoosh Web Push Demo</title>

  <!-- 1) Подключаем Pushwoosh Web SDK асинхронно -->
  <script async src="//cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js"></script>

  <script>
    // 2) Инициализация Pushwoosh Web SDK (заменить apiToken на ваш настоящий)
    var Pushwoosh = Pushwoosh || [];
    Pushwoosh.push(['init', {
      logLevel: 'info',                            
      applicationCode: '9627A-C956D',              // ваш Application Code
      apiToken:        'YOtYgEuAX00Dgs81J6EkY1MFBvQnHOGb2GzRy6MjNaaBHuILH2fdqrE7UcnmICvYDAf24vLAOWNvHkH4GQqd5',
      safariWebsitePushID: '',                     // если не настраивали Safari Push ID, оставляем пустым
      defaultNotificationTitle: 'Pushwoosh Demo',  // заголовок пушей по умолчанию
      defaultNotificationImage: 'https://asmoliak3.github.io/img/logo.png', // URL изображения для пушей
      autoSubscribe:   false,                      
      subscribeWidget: {
        enable: true                               
      }
    }]);
  </script>
</head>
<body>
  <h1>Pushwoosh Web Push Demo</h1>

  <!-- 3) Кнопка для ручной подписки -->
  <button id="subscribe-btn">Подписаться на уведомления</button>

  <script>
    // 4) При клике на кнопку вызываем метод subscribe()
    document.getElementById('subscribe-btn').addEventListener('click', function() {
      Pushwoosh.push(['subscribe']);
    });
  </script>

  <!-- 5) Регистрируем service worker для Pushwoosh -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/pushwoosh-service-worker.js')
          .then(function(reg) {
            console.log('Service worker зарегистрирован:', reg);
          })
          .catch(function(err) {
            console.error('Не удалось зарегистрировать service worker:', err);
          });
      });
    }
  </script>
</body>
</html>
