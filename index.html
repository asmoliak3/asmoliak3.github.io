<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pushwoosh Web Push Demo</title>
</head>
<body>
  <h1>Pushwoosh Web Push Demo</h1>

  <!-- Кнопка, по которой пользователь вручную подписывается на пуш-уведомления -->
  <button id="pw-subscribe-btn">Подписаться на уведомления</button>

  <!-- Подключаем Pushwoosh Web SDK -->
  <script 
    type="text/javascript" 
    src="//cdn.pushwoosh.com/webpush/v3/pushwoosh-web-notifications.js" 
    async>
  </script>

  <script type="text/javascript">
    // Глобальный массив Pushwoosh (если он ещё не существует)
    var Pushwoosh = Pushwoosh || [];

    // === 1. Инициализация SDK ===
    // Не передаём userId, чтобы не было автоматического вызова registerUser
    Pushwoosh.push(['init', {
      logLevel: 'error',                           // Можно 'info' для отладки
      applicationCode: '9627A-C956D',              // Вставьте ваш Application Code
      apiToken: 'tYgEudA4O0Dgs81J6EkY1MF8vQnHOGb2GzRy6MjNaaBHuILH2fdqrE7UcnmICvYDaf24vLAOWNvHkh4G0qd5',
      serviceWorkerUrl: '/pushwoosh-service-worker.js',
      safariWebsitePushID: '',                     // Оставьте пустым, если Safari не используете
      defaultNotificationTitle: 'Pushwoosh Demo',
      defaultNotificationImage: 'https://yoursite.com/img/logo-medium.png',
      autoSubscribe: false,                        // НЕ показывать виджет подписки сразу
      subscribeWidget: { enable: false },
      // userId: 'user_id_example',                 // УБРАЛИ!!! (чтобы не было 401 Unauthorized)
      tags: { 'DemoTag': 'DemoValue' }
    }]);

    // === 2. Вешаем обработчик на кнопку, чтобы вызвать registerDevice ===
    document.getElementById('pw-subscribe-btn').addEventListener('click', function() {
      Pushwoosh.push(['registerDevice']);
    });
  </script>
</body>
</html>
